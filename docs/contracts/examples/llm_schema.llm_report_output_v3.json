{
  "schemaId": "llm_schema_1M_report_v3_0",
  "kind": "LLM_REPORT_OUTPUT",
  "createdAt": "2026-01-01T00:00:00Z",
  "description": "Structured output schema for 1M Elliott Wave report details (strict details contract).",
  "jsonSchema": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "summary",
      "details"
    ],
    "properties": {
      "summary": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "markdown"
        ],
        "properties": {
          "markdown": {
            "type": "string",
            "description": "Human-readable report summary in Markdown."
          }
        }
      },
      "details": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "timeframe",
          "symbol",
          "as_of_date",
          "trend",
          "waves",
          "wave_scenarios",
          "patterns",
          "key_levels",
          "indicators_summary",
          "risks_and_limitations",
          "scenarios",
          "analysis_confidence",
          "agent_recommendations",
          "summary_for_next_timeframes"
        ],
        "properties": {
          "timeframe": {
            "type": "string"
          },
          "symbol": {
            "type": "string"
          },
          "as_of_date": {
            "type": "string",
            "pattern": "^\\\\d{4}-\\\\d{2}-\\\\d{2}$"
          },
          "trend": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "direction",
              "trend_strength",
              "phase",
              "cycle_phase",
              "description"
            ],
            "properties": {
              "direction": {
                "type": "string",
                "enum": [
                  "bull",
                  "bear",
                  "sideways"
                ]
              },
              "trend_strength": {
                "type": "string",
                "enum": [
                  "weak",
                  "moderate",
                  "strong"
                ]
              },
              "phase": {
                "type": "string",
                "enum": [
                  "impulse",
                  "correction",
                  "consolidation"
                ]
              },
              "cycle_phase": {
                "type": "string"
              },
              "description": {
                "type": "string"
              }
            }
          },
          "waves": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "label",
                "degree",
                "start_date",
                "start_price",
                "end_date",
                "end_price",
                "confidence"
              ],
              "properties": {
                "label": {
                  "type": "string"
                },
                "degree": {
                  "type": "string",
                  "enum": [
                    "cycle",
                    "primary",
                    "intermediate",
                    "minor"
                  ]
                },
                "start_date": {
                  "type": "string",
                  "pattern": "^\\\\d{4}-\\\\d{2}-\\\\d{2}$"
                },
                "start_price": {
                  "type": "number"
                },
                "end_date": {
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^\\\\d{4}-\\\\d{2}-\\\\d{2}$"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "end_price": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "confidence": {
                  "type": "string",
                  "enum": [
                    "High",
                    "Medium",
                    "Low"
                  ]
                }
              }
            }
          },
          "wave_scenarios": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "id",
                "linked_scenarios",
                "probability",
                "description",
                "waves",
                "quantitative_score"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "pattern": "^WS[1-9][0-9]*$"
                },
                "linked_scenarios": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "pattern": "^S[1-9][0-9]*$"
                  }
                },
                "probability": {
                  "type": "string",
                  "enum": [
                    "High",
                    "Medium",
                    "Low"
                  ]
                },
                "description": {
                  "type": "string"
                },
                "waves": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "label",
                      "degree",
                      "start_date",
                      "start_price",
                      "end_date",
                      "end_price"
                    ],
                    "properties": {
                      "label": {
                        "type": "string"
                      },
                      "degree": {
                        "type": "string",
                        "enum": [
                          "cycle",
                          "primary",
                          "intermediate",
                          "minor"
                        ]
                      },
                      "start_date": {
                        "type": "string",
                        "pattern": "^\\\\d{4}-\\\\d{2}-\\\\d{2}$"
                      },
                      "start_price": {
                        "type": "number"
                      },
                      "end_date": {
                        "anyOf": [
                          {
                            "type": "string",
                            "pattern": "^\\\\d{4}-\\\\d{2}-\\\\d{2}$"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "end_price": {
                        "anyOf": [
                          {
                            "type": "number"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  }
                },
                "quantitative_score": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "total_score",
                    "normalized_probability",
                    "method_comment"
                  ],
                  "properties": {
                    "total_score": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "normalized_probability": {
                      "type": "number",
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "method_comment": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "patterns": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "name",
                "direction",
                "price_zone",
                "description"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "direction": {
                  "type": "string",
                  "enum": [
                    "bullish",
                    "bearish",
                    "neutral"
                  ]
                },
                "price_zone": {
                  "type": "array",
                  "minItems": 2,
                  "maxItems": 2,
                  "items": {
                    "type": "number"
                  }
                },
                "description": {
                  "type": "string"
                }
              }
            }
          },
          "key_levels": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "type",
                "level",
                "source",
                "strength",
                "note"
              ],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "support",
                    "resistance",
                    "vpvr_poc",
                    "vpvr_hvn",
                    "vpvr_lvn",
                    "fib",
                    "ma"
                  ]
                },
                "level": {
                  "type": "number"
                },
                "source": {
                  "type": "string"
                },
                "strength": {
                  "anyOf": [
                    {
                      "type": "integer",
                      "enum": [
                        1,
                        2,
                        3
                      ]
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "note": {
                  "type": "string"
                }
              }
            }
          },
          "indicators_summary": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "ma",
              "bb",
              "macd",
              "rsi",
              "adx"
            ],
            "properties": {
              "ma": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "ma12_vs_ma26",
                  "description"
                ],
                "properties": {
                  "ma12_vs_ma26": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              },
              "bb": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "state",
                  "description"
                ],
                "properties": {
                  "state": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              },
              "macd": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "state",
                  "description"
                ],
                "properties": {
                  "state": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              },
              "rsi": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "value_zone",
                  "description"
                ],
                "properties": {
                  "value_zone": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              },
              "adx": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "strength",
                  "description"
                ],
                "properties": {
                  "strength": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "risks_and_limitations": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "factors",
              "sensitivity_comment"
            ],
            "properties": {
              "factors": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "sensitivity_comment": {
                "type": "string"
              }
            }
          },
          "scenarios": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "id",
                "name",
                "role",
                "probability",
                "direction",
                "time_horizon",
                "targets",
                "target_zones",
                "invalidation_levels",
                "probability_comment",
                "rationale",
                "quantitative_score"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "pattern": "^S[1-9][0-9]*$"
                },
                "name": {
                  "type": "string"
                },
                "role": {
                  "type": "string",
                  "enum": [
                    "base",
                    "bullish",
                    "bearish",
                    "other"
                  ]
                },
                "probability": {
                  "type": "string",
                  "enum": [
                    "High",
                    "Medium",
                    "Low"
                  ]
                },
                "direction": {
                  "type": "string",
                  "enum": [
                    "up",
                    "down",
                    "sideways"
                  ]
                },
                "time_horizon": {
                  "type": "string"
                },
                "targets": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "type",
                      "level"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "primary_target",
                          "secondary_target",
                          "extension"
                        ]
                      },
                      "level": {
                        "type": "number"
                      }
                    }
                  }
                },
                "target_zones": {
                  "type": "array",
                  "items": {
                    "type": "array",
                    "minItems": 2,
                    "maxItems": 2,
                    "items": {
                      "type": "number"
                    }
                  }
                },
                "invalidation_levels": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  }
                },
                "probability_comment": {
                  "type": "string"
                },
                "rationale": {
                  "type": "string"
                },
                "quantitative_score": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "total_score",
                    "components",
                    "normalized_probability",
                    "method_comment"
                  ],
                  "properties": {
                    "total_score": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "components": {
                      "type": "object",
                      "additionalProperties": false,
                      "required": [
                        "structure",
                        "momentum_and_patterns",
                        "distance_to_invalidation",
                        "volume_and_onchain"
                      ],
                      "properties": {
                        "structure": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 40
                        },
                        "momentum_and_patterns": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 30
                        },
                        "distance_to_invalidation": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 20
                        },
                        "volume_and_onchain": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 10
                        }
                      }
                    },
                    "normalized_probability": {
                      "type": "number",
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "method_comment": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "analysis_confidence": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "overall_confidence",
              "comment"
            ],
            "properties": {
              "overall_confidence": {
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0
              },
              "comment": {
                "type": "string"
              }
            }
          },
          "agent_recommendations": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "need_weekly",
              "need_daily",
              "need_derivatives",
              "need_onchain"
            ],
            "properties": {
              "need_weekly": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "need_daily": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "need_derivatives": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "need_onchain": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "summary_for_next_timeframes": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "dominant_scenario_id",
              "one_line",
              "key_points",
              "trend",
              "key_levels_brief",
              "scenarios_brief"
            ],
            "properties": {
              "dominant_scenario_id": {
                "type": "string",
                "pattern": "^S[1-9][0-9]*$"
              },
              "one_line": {
                "type": "string"
              },
              "key_points": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "trend": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "direction",
                  "cycle_phase",
                  "key_message"
                ],
                "properties": {
                  "direction": {
                    "type": "string",
                    "enum": [
                      "bull",
                      "bear",
                      "sideways"
                    ]
                  },
                  "cycle_phase": {
                    "type": "string"
                  },
                  "key_message": {
                    "type": "string"
                  }
                }
              },
              "key_levels_brief": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "supports",
                  "resistances"
                ],
                "properties": {
                  "supports": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  },
                  "resistances": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              "scenarios_brief": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "base",
                  "bullish",
                  "bearish"
                ],
                "properties": {
                  "base": {
                    "type": "string"
                  },
                  "bullish": {
                    "type": "string"
                  },
                  "bearish": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "sha256": "5e27b217e72969766d2eecfa52652246838c7a046e29fa8d2be2f09f5fd00961",
  "isActive": true
}
