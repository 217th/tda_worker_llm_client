{
  "schemaId": "llm_schema_1M_report_depth5_v4_0",
  "kind": "LLM_REPORT_OUTPUT",
  "createdAt": "2026-01-01T00:00:00Z",
  "description": "Simplified depth-5 variant of v3 for nesting-limit experiments.",
  "jsonSchema": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "summary",
      "details"
    ],
    "properties": {
      "summary": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "markdown"
        ],
        "properties": {
          "markdown": {
            "type": "string",
            "description": "Human-readable report summary in Markdown."
          }
        }
      },
      "details": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "timeframe",
          "symbol",
          "as_of_date",
          "trend",
          "waves",
          "wave_scenarios",
          "patterns",
          "key_levels",
          "indicators_summary",
          "risks_and_limitations",
          "scenarios",
          "analysis_confidence",
          "agent_recommendations",
          "summary_for_next_timeframes"
        ],
        "properties": {
          "timeframe": {
            "type": "string"
          },
          "symbol": {
            "type": "string"
          },
          "as_of_date": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "trend": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "direction",
              "phase",
              "description"
            ],
            "properties": {
              "direction": {
                "type": "string",
                "enum": [
                  "bull",
                  "bear",
                  "sideways"
                ]
              },
              "phase": {
                "type": "string",
                "enum": [
                  "impulse",
                  "correction",
                  "consolidation"
                ]
              },
              "description": {
                "type": "string"
              }
            }
          },
          "waves": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Flattened waves entry."
            }
          },
          "wave_scenarios": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Flattened wave_scenarios entry."
            }
          },
          "patterns": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Flattened patterns entry."
            }
          },
          "key_levels": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Flattened key_levels entry."
            }
          },
          "indicators_summary": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "ma",
              "bb",
              "macd",
              "rsi",
              "adx"
            ],
            "properties": {
              "ma": {
                "type": "string"
              },
              "bb": {
                "type": "string"
              },
              "macd": {
                "type": "string"
              },
              "rsi": {
                "type": "string"
              },
              "adx": {
                "type": "string"
              }
            }
          },
          "risks_and_limitations": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "scenarios": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Flattened scenarios entry."
            }
          },
          "analysis_confidence": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "overall_confidence",
              "comment"
            ],
            "properties": {
              "overall_confidence": {
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0
              },
              "comment": {
                "type": "string"
              }
            }
          },
          "agent_recommendations": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "summary_for_next_timeframes": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "dominant_scenario_id",
              "one_line",
              "key_points",
              "trend_summary",
              "key_levels_brief",
              "scenarios_brief"
            ],
            "properties": {
              "dominant_scenario_id": {
                "type": "string",
                "pattern": "^S[1-9][0-9]*$"
              },
              "one_line": {
                "type": "string"
              },
              "key_points": {
                "type": "string",
                "description": "Comma-separated key points."
              },
              "trend_summary": {
                "type": "string"
              },
              "key_levels_brief": {
                "type": "string"
              },
              "scenarios_brief": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "sha256": "f2cb1037545a34724c07a50728bccf388b6d4a22ed6b8ef622d40fa6aece9c7e",
  "isActive": true
}
