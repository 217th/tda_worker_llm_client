{
  "tasks": [
    {
      "id": "T-001",
      "title": "E00 Spike: choose region/Eventarc routing for Firestore trigger",
      "description": "Epic 0 (Cloud environment + deploy pipeline): decide and document region alignment (Firestore DB, Eventarc trigger, Cloud Functions gen2) and update @docs/questions/open_questions.md / @docs/spec/deploy_and_envs.md if needed.",
      "status": "DONE",
      "priority": "low",
      "owner": "DOCS",
      "tags": [
        "epic0",
        "spike",
        "gcp",
        "eventarc"
      ],
      "depends_on": [],
      "commit": {
        "hash": "d8ad63a33a83253942c89b3808f6661e9ad5c4e1",
        "message": "üó∫Ô∏è T-001 align region routing"
      }
    },
    {
      "id": "T-002",
      "title": "E00 Spike: define least-privilege IAM for runtime/trigger SAs",
      "description": "Epic 0 (Cloud environment + deploy pipeline): enumerate minimal IAM roles for runtime SA and Eventarc trigger SA (Firestore, GCS, Secret Manager, Eventarc) and document in @docs/spec/deploy_and_envs.md + runbook.",
      "status": "DONE",
      "priority": "low",
      "owner": "DOCS",
      "tags": [
        "epic0",
        "spike",
        "iam",
        "gcp"
      ],
      "depends_on": [],
      "commit": {
        "hash": "71aa4a980cfbd744d3f97ab17cdd7590a0a89a2a",
        "message": "üîê T-002 IAM least-privilege"
      }
    },
    {
      "id": "T-003",
      "title": "E00 Define dev GCP bootstrap checklist and required resources",
      "description": "Epic 0 (Cloud environment + deploy pipeline): produce a concrete dev-environment bootstrap checklist (project/region/Firestore DB/buckets/SA/Secret Manager) aligned to decisions from SPK-017/018; update @docs/spec/deploy_and_envs.md and add a runbook entry.",
      "status": "DONE",
      "priority": "med",
      "owner": "DOCS",
      "tags": [
        "epic0",
        "docs",
        "gcp"
      ],
      "depends_on": [
        "T-001",
        "T-002"
      ],
      "commit": {
        "hash": "c183c0d7e2291c8f14c1f10fae904272b19c49c8",
        "message": "üß∞ T-003 dev bootstrap checklist"
      }
    },
    {
      "id": "T-004",
      "title": "E00 Add deploy pipeline command/script for Cloud Functions gen2",
      "description": "Epic 0 (Cloud environment + deploy pipeline): implement a repeatable deploy/update command (e.g. Makefile target or script) using the gcp-functions-gen2-python-deploy playbook; keep placeholders for secrets/IDs; include env vars file handling.",
      "status": "DONE",
      "priority": "med",
      "owner": "CODER",
      "tags": [
        "epic0",
        "deploy",
        "gcp",
        "pipeline"
      ],
      "depends_on": [
        "T-003"
      ],
      "commit": {
        "hash": "228ba0c77a421088db7bc107f4a194a1d7a08686",
        "message": "üìù T-004 T-007 deploy lessons learned"
      }
    },
    {
      "id": "T-005",
      "title": "E00 Add smoke-check runbook + Cloud Logging queries",
      "description": "Epic 0 (Cloud environment + deploy pipeline): document smoke scenario and log queries (jsonPayload.event chain, runId/stepId filters) plus GCS artifact checks; align with deploy pipeline.",
      "status": "DONE",
      "priority": "med",
      "owner": "DOCS",
      "tags": [
        "epic0",
        "docs",
        "logging",
        "smoke"
      ],
      "depends_on": [
        "T-003",
        "T-004"
      ],
      "commit": {
        "hash": "341ddaa580095f0ce885655fd3fd24b1d84ce277",
        "message": "üß™ T-005 smoke runbook"
      }
    },
    {
      "id": "T-006",
      "title": "E00 Verify dev deploy pipeline + smoke scenario (DoD)",
      "description": "Epic 0 (Cloud environment + deploy pipeline): run the deploy/update flow in dev and execute the smoke-check runbook; use gcp-functions-gen2-python-deploy playbook verification steps; record evidence in @.codex-swarm/workspace/T-006/README.md.",
      "status": "DONE",
      "priority": "med",
      "owner": "TESTER",
      "tags": [
        "epic0",
        "verify",
        "cloud"
      ],
      "depends_on": [
        "T-004",
        "T-005"
      ],
      "commit": {
        "hash": "85d244ce58853bb39661e1cc41ff8d3142739b05",
        "message": "üß™ T-006 record smoke verification"
      }
    },
    {
      "id": "T-007",
      "title": "E00 Add minimal Cloud Functions stub for deploy testing",
      "description": "Epic 0 (Cloud environment + deploy pipeline): add a minimal main.py + requirements.txt (+ .gcloudignore) so the deploy script can be exercised safely before real implementation.",
      "status": "DONE",
      "priority": "med",
      "owner": "CODER",
      "tags": [
        "epic0",
        "deploy",
        "stub"
      ],
      "depends_on": [
        "T-004"
      ],
      "commit": {
        "hash": "901d498be7a6ee0883a99ba17b5b544fe5d83d80",
        "message": "üßπ T-007 ignore gcloud config"
      }
    },
    {
      "id": "T-008",
      "title": "E01 Spike: confirm Gemini endpoint + SDK constraints",
      "description": "Epic 1 spike (SPK-007): confirm the production endpoint decision (AI Studio vs Vertex AI) and SDK support for structured output + image parts; update @docs/spec/system_integration.md, @docs/spec/deploy_and_envs.md, and @docs/questions/open_questions.md if any decision changes are needed.",
      "status": "DOING",
      "priority": "med",
      "owner": "DOCS",
      "tags": [
        "epic1",
        "spike",
        "gemini"
      ],
      "depends_on": [],
      "comments": [
        {
          "author": "DOCS",
          "body": "Start: review official Gemini API + Google GenAI SDK docs to confirm endpoint choice and SDK constraints for structured output + image inputs; update docs per Epic 1 spike."
        }
      ]
    },
    {
      "id": "T-009",
      "title": "E01 Spike: define model allowlist policy",
      "description": "Epic 1 spike (SPK-020): define and document the allowed-models policy (format/location of allowlist, enforcement strategy, and error mapping for disallowed models) and update @docs/spec/deploy_and_envs.md and @docs/spec/system_integration.md accordingly.",
      "status": "TODO",
      "priority": "med",
      "owner": "DOCS",
      "tags": [
        "epic1",
        "spike",
        "config"
      ],
      "depends_on": []
    },
    {
      "id": "T-010",
      "title": "E01 Implement WorkerConfig + Gemini auth config",
      "description": "Implement Epic 1 classes: WorkerConfig, GeminiApiKey, GeminiAuthConfig. Validate env config (collections, bucket, timeouts, log level) and support single-key (GEMINI_API_KEY) + rotation-friendly multi-key (GEMINI_API_KEYS_JSON + GEMINI_API_KEY_ID) without leaking secrets; wire config into the runtime entrypoint.",
      "status": "TODO",
      "priority": "high",
      "owner": "CODER",
      "tags": [
        "epic1",
        "config",
        "runtime"
      ],
      "depends_on": [
        "T-008",
        "T-009"
      ]
    },
    {
      "id": "T-011",
      "title": "E01 Add unit tests for runtime config",
      "description": "Add unit tests for WorkerConfig.from_env() and Gemini auth parsing: single-key happy path, multi-key happy path, invalid JSON/missing fields/unknown key id; assert error messages do not include apiKey or its hash.",
      "status": "TODO",
      "priority": "med",
      "owner": "TESTER",
      "tags": [
        "epic1",
        "tests"
      ],
      "depends_on": [
        "T-010"
      ]
    },
    {
      "id": "T-012",
      "title": "E01 Dev verify secret injection + logging",
      "description": "Using the dev deploy pipeline from Epic 0, verify Secret Manager ‚Üí env var injection for Gemini keys and confirm logs only include llm.auth.mode and (optional) llm.auth.keyId; record evidence in @.codex-swarm/workspace/T-012/README.md.",
      "status": "TODO",
      "priority": "med",
      "owner": "TESTER",
      "tags": [
        "epic1",
        "verify",
        "cloud"
      ],
      "depends_on": [
        "T-010",
        "T-011"
      ]
    },
    {
      "id": "T-013",
      "title": "E01 Epic 1 DoD verification + stabilization",
      "description": "Final Epic 1 verification: run local test suite for config/auth and confirm dev smoke results meet Epic 1 DoD (validated config, no secret leakage, rotation-friendly auth). Update @.codex-swarm/workspace/T-013/README.md with results and any stabilization notes.",
      "status": "TODO",
      "priority": "med",
      "owner": "INTEGRATOR",
      "tags": [
        "epic1",
        "verify",
        "stabilization"
      ],
      "depends_on": [
        "T-012"
      ]
    }
  ],
  "meta": {
    "schema_version": 1,
    "managed_by": "agentctl",
    "checksum_algo": "sha256",
    "checksum": "4d3d9f2b2cb6a043907eec27c22a35e7b6853608a9c1967400cea042b9962448"
  }
}
